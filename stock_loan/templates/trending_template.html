{% extends 'base.html' %}

{% block content %}

<script>
    $(document).ready(function()
    {
        $("#fee").tablesorter({
                    headers: {
                        3: {
                            sorter:'thousands'
                        }
                    }
                }
        );
        $("#available").tablesorter({
                    headers: {
                        3: {
                            sorter:'thousands'
                        }
                    }
                }
        );
    });

// add parser through the tablesorter addParser method
$.tablesorter.addParser({
    // set a unique id
    id: 'thousands',
    is: function(s) {
        // return false so this parser is not auto detected
        return false;
    },
    format: function(s) {
        // format your data for normalization
        return s.replace('$','').replace(/,/g,'');
    },
    // set type, either numeric or text
    type: 'numeric'
});

</script>
    <div class= "col-md-6">
        <h2 align="center">Increasing Fees</h2>
        <table class="tablesorter table table-condensed table-responsive table-hover" id="fee">
            <thead>
                <tr>
                    <th>Symbol</th>
                    <th>Name</th>
                    <th>Fee</th>
                    <th>Availability</th>
                </tr>
            </thead>
            <tbody data-link="row" class="rowlink">
                {% for symbol in trending_fee %}
                    <tr>
                        <td>
                            <a href="{{url_for('historical_report')}}?symbol={{symbol['symbol']}}&&real_time=True"> {{symbol['symbol']}}</a></td>
                        <td>{{ symbol['name'] }}</td>
                        <td>{{ '{:.1%}'.format(symbol['fee']/100) }}</td>
                        <td>{{ '{:,}'.format(symbol['available']) }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <div class= "col-md-6">
        <h2 align="center">Declining Availability</h2>
        <table class="tablesorter table table-condensed table-responsive table-hover" id="available">
            <thead>
                <tr>
                    <th>Symbol</th>
                    <th>Name</th>
                    <th>Fee</th>
                    <th>Availability</th>
                </tr>
            </thead>
            <tbody data-link="row" class="rowlink">
                {% for symbol in trending_available %}
                    <tr>
                        <td>
                            <a href="{{url_for('historical_report')}}?symbol={{symbol['symbol']}}&&real_time=True"> {{symbol['symbol']}}</a></td>
                        <td>{{ symbol['name'] }}</td>
                        <td>{{ '{:.1%}'.format(symbol['fee']/100) }}</td>
                        <td>{{ '{:,}'.format(symbol['available']) }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="row">
        <div class="col-md-12">
            <p>Trending securities are ranked by deviation from 7day average.</p>
        </div>
    </div>



{% endblock %}
